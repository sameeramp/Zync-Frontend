{"ast":null,"code":"var _jsxFileName = \"/home/sameeramp/Videos/discord-app/discord-frontend/src/Dashboard/Room/RoomButtons/ScreenShareButton.js\";\nimport React, { useState } from \"react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ScreenShareIcon from \"@mui/icons-material/ScreenShare\";\nimport StopScreenShareIcon from \"@mui/icons-material/StopScreenShare\";\nimport * as webRTCHandler from \"../../../realtimeCommunication/webRTCHandler\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst constraints = {\n  audio: false,\n  video: true\n};\nconst ScreenShareButton = ({\n  localStream,\n  screenSharingStream,\n  setScreenSharingStream,\n  isScreenSharingActive\n}) => {\n  const handleScreenShareToggle = async () => {\n    if (!isScreenSharingActive) {\n      let stream = null;\n      try {\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\n      } catch (err) {\n        console.log(\"error occured when trying to get an access to screen share stream\");\n      }\n      if (stream) {\n        setScreenSharingStream(stream);\n        webRTCHandler.switchOutgoingTracks(stream);\n      }\n    } else {\n      webRTCHandler.switchOutgoingTracks(localStream);\n      screenSharingStream.getTracks().forEach(t => t.stop());\n      setScreenSharingStream(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(IconButton, {\n    onClick: handleScreenShareToggle,\n    style: {\n      color: \"white\"\n    },\n    children: isScreenSharingActive ? /*#__PURE__*/_jsxDEV(StopScreenShareIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 32\n    }, this) : /*#__PURE__*/_jsxDEV(ScreenShareIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 58\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_c = ScreenShareButton;\nexport default ScreenShareButton;\nvar _c;\n$RefreshReg$(_c, \"ScreenShareButton\");","map":{"version":3,"names":["React","useState","IconButton","ScreenShareIcon","StopScreenShareIcon","webRTCHandler","jsxDEV","_jsxDEV","constraints","audio","video","ScreenShareButton","localStream","screenSharingStream","setScreenSharingStream","isScreenSharingActive","handleScreenShareToggle","stream","navigator","mediaDevices","getDisplayMedia","err","console","log","switchOutgoingTracks","getTracks","forEach","t","stop","onClick","style","color","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/sameeramp/Videos/discord-app/discord-frontend/src/Dashboard/Room/RoomButtons/ScreenShareButton.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport ScreenShareIcon from \"@mui/icons-material/ScreenShare\";\r\nimport StopScreenShareIcon from \"@mui/icons-material/StopScreenShare\";\r\nimport * as webRTCHandler from \"../../../realtimeCommunication/webRTCHandler\";\r\n\r\nconst constraints = {\r\n  audio: false,\r\n  video: true,\r\n};\r\n\r\nconst ScreenShareButton = ({\r\n  localStream,\r\n  screenSharingStream,\r\n  setScreenSharingStream,\r\n  isScreenSharingActive,\r\n}) => {\r\n  const handleScreenShareToggle = async () => {\r\n    if (!isScreenSharingActive) {\r\n      let stream = null;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n      } catch (err) {\r\n        console.log(\r\n          \"error occured when trying to get an access to screen share stream\"\r\n        );\r\n      }\r\n\r\n      if (stream) {\r\n        setScreenSharingStream(stream);\r\n        webRTCHandler.switchOutgoingTracks(stream);\r\n      }\r\n    } else {\r\n      webRTCHandler.switchOutgoingTracks(localStream);\r\n      screenSharingStream.getTracks().forEach((t) => t.stop());\r\n      setScreenSharingStream(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleScreenShareToggle} style={{ color: \"white\" }}>\r\n      {isScreenSharingActive ? <StopScreenShareIcon /> : <ScreenShareIcon />}\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default ScreenShareButton;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,mBAAmB,MAAM,qCAAqC;AACrE,OAAO,KAAKC,aAAa,MAAM,8CAA8C;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9E,MAAMC,WAAW,GAAG;EAClBC,KAAK,EAAE,KAAK;EACZC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,iBAAiB,GAAGA,CAAC;EACzBC,WAAW;EACXC,mBAAmB;EACnBC,sBAAsB;EACtBC;AACF,CAAC,KAAK;EACJ,MAAMC,uBAAuB,GAAG,MAAAA,CAAA,KAAY;IAC1C,IAAI,CAACD,qBAAqB,EAAE;MAC1B,IAAIE,MAAM,GAAG,IAAI;MACjB,IAAI;QACFA,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,eAAe,CAACZ,WAAW,CAAC;MACpE,CAAC,CAAC,OAAOa,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CACT,mEACF,CAAC;MACH;MAEA,IAAIN,MAAM,EAAE;QACVH,sBAAsB,CAACG,MAAM,CAAC;QAC9BZ,aAAa,CAACmB,oBAAoB,CAACP,MAAM,CAAC;MAC5C;IACF,CAAC,MAAM;MACLZ,aAAa,CAACmB,oBAAoB,CAACZ,WAAW,CAAC;MAC/CC,mBAAmB,CAACY,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;MACxDd,sBAAsB,CAAC,IAAI,CAAC;IAC9B;EACF,CAAC;EAED,oBACEP,OAAA,CAACL,UAAU;IAAC2B,OAAO,EAAEb,uBAAwB;IAACc,KAAK,EAAE;MAAEC,KAAK,EAAE;IAAQ,CAAE;IAAAC,QAAA,EACrEjB,qBAAqB,gBAAGR,OAAA,CAACH,mBAAmB;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,gBAAG7B,OAAA,CAACJ,eAAe;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5D,CAAC;AAEjB,CAAC;AAACC,EAAA,GAjCI1B,iBAAiB;AAmCvB,eAAeA,iBAAiB;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}