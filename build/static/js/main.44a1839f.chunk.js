(this["webpackJsonpdiscord-frontend"]=this["webpackJsonpdiscord-frontend"]||[]).push([[0],{181:function(e,t,n){},220:function(e,t){},222:function(e,t){},231:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(29),o=n.n(a),i=(n(181),n(52)),c=n(18),l=n(305),d=n(307),j=n(1);const h=Object(d.a)("div")({width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#5865F2"});var b=e=>Object(j.jsx)(h,{children:Object(j.jsx)(l.a,{sx:{width:700,height:400,bgcolor:"#36393f",borderRadius:"5px",boxShadow:"0 2px 10px 0 rgb(0 0 0 / 20%)",display:"flex",flexDirection:"column",padding:"25px"},children:e.children})}),u=n(304);var x=e=>{let{label:t,additionalStyles:n,disabled:r,onClick:s}=e;return Object(j.jsx)(u.a,{variant:"contained",sx:{bgcolor:"#5865F2",color:"white",textTransform:"none",fontSize:"16px",fontWeight:500,width:"100%",height:"40px"},style:n||{},disabled:r,onClick:s,children:t})},p=n(244);const O=Object(d.a)("span")({color:"#00AFF4",fontWeight:500,cursor:"pointer"});var m=e=>{let{text:t,redirectText:n,additionalStyles:r,redirectHandler:s}=e;return Object(j.jsxs)(p.a,{sx:{color:"#72767d"},style:r||{},variant:"subtitle2",children:[t,Object(j.jsx)(O,{onClick:s,children:n})]})},g=n(297);var v=e=>{let{handleLogin:t,isFormValid:n}=e;const r=Object(c.g)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a,{title:n?"Press to log in!":"Enter correct e-mail address and password should contains between 6 and 12 characters",children:Object(j.jsx)("div",{children:Object(j.jsx)(x,{label:"Log in",additionalStyles:{marginTop:"30px"},disabled:!n,onClick:t})})}),Object(j.jsx)(m,{text:"Need an account? ",redirectText:"Create an account",additionalStyles:{marginTop:"5px"},redirectHandler:()=>{r.push("/register")}})]})};var S=()=>Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(p.a,{variant:"h5",sx:{color:"white"},children:"Welcome Back!"}),Object(j.jsx)(p.a,{sx:{color:"#b9bbbe"},children:"We are happy that you are with us!"})]});const y=Object(d.a)("div")({display:"flex",justifyContent:"center",flexDirection:"column",width:"100%"}),f=Object(d.a)("p")({color:"#b9bbbe",textTransform:"uppercase",fontWeight:"600",fontSize:"16px"}),w=Object(d.a)("input")({flexGrow:1,height:"40px",border:"1px solid black",borderRadius:"5px",color:"#dcddde",background:"#35393f",margin:0,fontSize:"16px",padding:"0 5px"});var E=e=>{const{value:t,setValue:n,label:r,type:s,placeholder:a}=e;return Object(j.jsxs)(y,{children:[Object(j.jsx)(f,{children:r}),Object(j.jsx)(w,{value:t,onChange:e=>{n(e.target.value)},type:s,placeholder:a})]})};var I=e=>{let{mail:t,setMail:n,password:r,setPassword:s}=e;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E,{value:t,setValue:n,label:"E-mail",type:"text",placeholder:"Enter e-mail address"}),Object(j.jsx)(E,{value:r,setValue:s,label:"Password",type:"password",placeholder:"Enter password"})]})};const C=e=>e.length>5&&e.length<13,T=e=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(e),R=e=>e.length>2&&e.length<13;var D=n(9),k=n(136);const A=()=>{localStorage.clear(),window.location.pathname="/login"},U=n.n(k).a.create({baseURL:"https://zync-oz9u.onrender.com/api"});U.interceptors.request.use((e=>{const t=localStorage.getItem("user");if(t){const n=JSON.parse(t).token;e.headers.Authorization=`Bearer ${n}`}return e}),(e=>Promise.reject(e)));const _=e=>{var t;const n=null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status;n&&(401===n||403===n)&&A()},M={OPEN_ALERT_MESSAGE:"ALERT.OPEN_ALERT_MESSAGE",CLOSE_ALERT_MESSAGE:"ALERT.CLOSE_ALERT_MESSAGE"},F=e=>({openAlertMessage:t=>e(L(t)),closeAlertMessage:()=>e(N())}),L=e=>({type:M.OPEN_ALERT_MESSAGE,content:e}),N=()=>({type:M.CLOSE_ALERT_MESSAGE});var W=M;const z="AUTH.SET_USER_DETAILS",P=e=>({login:(t,n)=>e(G(t,n)),register:(t,n)=>e(V(t,n)),setUserDetails:t=>e(H(t))}),H=e=>({type:z,userDetails:e}),G=(e,t)=>async n=>{const r=await(async e=>{try{return await U.post("/auth/login",e)}catch(t){return{error:!0,exception:t}}})(e);if(console.log(r),r.error){var s,a;n(L(null===r||void 0===r||null===(s=r.exception)||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data))}else{const{userDetails:e}=null===r||void 0===r?void 0:r.data;localStorage.setItem("user",JSON.stringify(e)),n(H(e)),t.push("/dashboard")}},V=(e,t)=>async n=>{const r=await(async e=>{try{return await U.post("/auth/register",e)}catch(t){return{error:!0,exception:t}}})(e);if(console.log(r),r.error){var s,a;n(L(null===r||void 0===r||null===(s=r.exception)||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data))}else{const{userDetails:e}=null===r||void 0===r?void 0:r.data;localStorage.setItem("user",JSON.stringify(e)),n(H(e)),t.push("/dashboard")}};var J=Object(D.b)(null,(e=>({...P(e)})))((e=>{let{login:t}=e;const n=Object(c.g)(),[s,a]=Object(r.useState)(""),[o,i]=Object(r.useState)(""),[l,d]=Object(r.useState)(!1);Object(r.useEffect)((()=>{d((e=>{let{mail:t,password:n}=e;const r=T(t),s=C(n);return r&&s})({mail:s,password:o}))}),[s,o,d]);return Object(j.jsxs)(b,{children:[Object(j.jsx)(S,{}),Object(j.jsx)(I,{mail:s,setMail:a,password:o,setPassword:i}),Object(j.jsx)(v,{isFormValid:l,handleLogin:()=>{t({mail:s,password:o},n)}})]})}));var B=e=>{const{mail:t,setMail:n,username:r,setUsername:s,password:a,setPassword:o}=e;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E,{value:t,setValue:n,label:"E-mail address",type:"text",placeholder:"Enter e-mail address"}),Object(j.jsx)(E,{value:r,setValue:s,label:"Username",type:"text",placeholder:"Enter a username"}),Object(j.jsx)(E,{value:a,setValue:o,label:"Password",type:"password",placeholder:"Enter password"})]})};var $=e=>{let{handleRegister:t,isFormValid:n}=e;const r=Object(c.g)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g.a,{title:n?"Press to register!":"Username should contains between 3 and 12 characters and password should contains between 6 and 12 character. Also correct e-mail address should provided",children:Object(j.jsx)("div",{children:Object(j.jsx)(x,{label:"Register",additionalStyles:{marginTop:"30px"},disabled:!n,onClick:t})})}),Object(j.jsx)(m,{text:"",redirectText:"Already have an account ?",additionalStyles:{marginTop:"5px"},redirectHandler:()=>{r.push("/login")}})]})};var Y=Object(D.b)(null,(e=>({...P(e)})))((e=>{let{register:t}=e;const n=Object(c.g)(),[s,a]=Object(r.useState)(""),[o,i]=Object(r.useState)(""),[l,d]=Object(r.useState)(""),[h,u]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{u((e=>{let{mail:t,password:n,username:r}=e;return T(t)&&C(n)&&R(r)})({mail:s,username:o,password:l}))}),[s,o,l,u]),Object(j.jsxs)(b,{children:[Object(j.jsx)(p.a,{variant:"h5",sx:{color:"white "},children:"Create an account"}),Object(j.jsx)(B,{mail:s,setMail:a,username:o,setUsername:i,password:l,setPassword:d}),Object(j.jsx)($,{handleRegister:()=>{t({mail:s,password:l,username:o},n)},isFormValid:h})]})})),Z=n(137),q=n.n(Z);var K=()=>Object(j.jsx)(u.a,{style:{width:"48px",height:"48px",borderRadius:"16px",margin:0,padding:0,minWidth:0,marginTop:"10px",color:"white",backgroundColor:"#5865F2"},children:Object(j.jsx)(q.a,{})}),Q=n(141),X=n.n(Q),ee=n(138),te=n(69),ne=n(139);const re={userDetails:null};var se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;return t.type===z?{...e,userDetails:t.userDetails}:e};const ae={showAlertMessage:!1,alertMessageContent:null};var oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.OPEN_ALERT_MESSAGE:return{...e,showAlertMessage:!0,alertMessageContent:t.content};case W.CLOSE_ALERT_MESSAGE:return{...e,showAlertMessage:!1,alertMessageContent:null};default:return e}};const ie="FRIENDS.SET_FRIENDS",ce="FRIENDS.SET_PENDING_FRIENDS_INVITATIONS",le="FRIENDS.SET_ONLINE_USERS",de=e=>({sendFriendInvitation:(t,n)=>e(je(t,n)),acceptFriendInvitation:t=>e(he(t)),rejectFriendInvitation:t=>e(be(t))}),je=(e,t)=>async n=>{const r=await(async e=>{try{return await U.post("/friend-invitation/invite",e)}catch(t){return _(t),{error:!0,exception:t}}})(e);var s,a;r.error?n(L(null===(s=r.exception)||void 0===s||null===(a=s.response)||void 0===a?void 0:a.data)):(n(L("Invitation has been sent!")),t())},he=e=>async t=>{const n=await(async e=>{try{return await U.post("/friend-invitation/accept",e)}catch(t){return _(t),{error:!0,exception:t}}})(e);var r,s;n.error?t(L(null===(r=n.exception)||void 0===r||null===(s=r.response)||void 0===s?void 0:s.data)):t(L("Invitation accepted!"))},be=e=>async t=>{const n=await(async e=>{try{return await U.post("/friend-invitation/reject",e)}catch(t){return _(t),{error:!0,exception:t}}})(e);var r,s;n.error?t(L(null===(r=n.exception)||void 0===r||null===(s=r.response)||void 0===s?void 0:s.data)):t(L("Invitation rejected!"))},ue={friends:[],pendingFriendsInvitations:[],onlineUsers:[]};var xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return{...e,pendingFriendsInvitations:t.pendingFriendsInvitations};case ie:return{...e,friends:t.friends};case le:return{...e,onlineUsers:t.onlineUsers};default:return e}};const pe="DIRECT",Oe="CHAT.SET_CHOSEN_CHAT_DETAILS",me="CHAT.SET_MESSAGES",ge=e=>({setChosenChatDetails:(t,n)=>e(ve(t,n))}),ve=(e,t)=>({type:Oe,chatType:t,chatDetails:e}),Se={chosenChatDetails:null,chatType:null,messages:[]};var ye=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return{...e,chosenChatDetails:t.chatDetails,chatType:t.chatType,messages:[]};case me:return{...e,messages:t.messages};default:return e}};const fe="ROOM.OPEN_ROOM",we="ROOM.SET_ROOM_DETAILS",Ee="ROOM.SET_ACTIVE_ROOMS",Ie="ROOM.SET_LOCAL_STREAM",Ce="ROOM.SET_REMOTE_STREAMS",Te="ROOM.SET_AUDIO_ONLY",Re="ROOM.SET_SCREEN_SHARE_STREAM",De="ROOM.SET_IS_USER_JOINED_WITH_ONLY_AUDIO",ke=function(){return{type:fe,isUserRoomCreator:arguments.length>0&&void 0!==arguments[0]&&arguments[0],isUserInRoom:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},Ae=e=>({setAudioOnly:t=>e(Me(t)),setScreenSharingStream:t=>{e(Le(t))}}),Ue=e=>({type:we,roomDetails:e}),_e=e=>({type:Ie,localStream:e}),Me=e=>({type:Te,audioOnly:e}),Fe=e=>({type:Ce,remoteStreams:e}),Le=e=>({type:Re,isScreenSharingActive:!!e,screenSharingStream:e||null}),Ne=e=>({type:De,isUserJoinedWithOnlyAudio:e}),We={isUserInRoom:!1,isUserRoomCreator:!1,roomDetails:null,activeRooms:[],localStream:null,remoteStreams:[],audioOnly:!1,screenSharingStream:null,isScreenSharingActive:!1,isUserJoinedWithOnlyAudio:!1};var ze=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return{...e,isUserInRoom:t.isUserInRoom,isUserRoomCreator:t.isUserRoomCreator};case we:return{...e,roomDetails:t.roomDetails};case Ee:return{...e,activeRooms:t.activeRooms};case Ie:return{...e,localStream:t.localStream};case Te:return{...e,audioOnly:t.audioOnly};case Ce:return{...e,remoteStreams:t.remoteStreams};case Re:return{...e,screenSharingStream:t.screenSharingStream,isScreenSharingActive:t.isScreenSharingActive};case De:return{...e,isUserJoinedWithOnlyAudio:t.isUserJoinedWithOnlyAudio};default:return e}};const Pe=Object(te.combineReducers)({auth:se,alert:oe,friends:xe,chat:ye,room:ze});var He=Object(te.createStore)(Pe,Object(ee.composeWithDevTools)(Object(te.applyMiddleware)(ne.a))),Ge=n(155);const Ve=e=>{let{participants:t,usersInCoversation:n,messages:r}=e;t.every((function(e){return n.includes(e)}))&&He.dispatch((e=>({type:me,messages:e}))(r))};var Je=n(140),Be=n.n(Je);const $e={audio:!0,video:!1},Ye={video:!0,audio:!0},Ze=function(){let e=arguments.length>1?arguments[1]:void 0;const t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?$e:Ye;navigator.mediaDevices.getUserMedia(t).then((t=>{He.dispatch(_e(t)),e()})).catch((e=>{console.log(e),console.log("Cannot get an access to local stream")}))};let qe={};const Ke=(e,t)=>{const n=He.getState().room.localStream;t?console.log("preparing new peer connection as initiator"):console.log("preparing new peer connection as not initiator"),qe[e]=new Be.a({initiator:t,config:(console.warn("Using only STUN server"),{iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),stream:n}),qe[e].on("signal",(t=>{nt({signal:t,connUserSocketId:e})})),qe[e].on("stream",(t=>{console.log("remote stream came from other user"),console.log("direct connection has been established"),t.connUserSocketId=e,Qe(t)}))},Qe=e=>{const t=[...He.getState().room.remoteStreams,e];He.dispatch(Fe(t))},Xe=e=>{for(let t in qe)for(let n in qe[t].streams[0].getTracks())for(let r in e.getTracks())if(qe[t].streams[0].getTracks()[n].kind===e.getTracks()[r].kind){qe[t].replaceTrack(qe[t].streams[0].getTracks()[n],e.getTracks()[r],qe[t].streams[0]);break}};let et=null;const tt=e=>{const t=e.token;et=Object(Ge.a)("http://localhost:5002",{auth:{token:t}}),et.on("connect",(()=>{console.log("succesfully connected with socket.io server"),console.log(et.id)})),et.on("friends-invitations",(e=>{const{pendingInvitations:t}=e;He.dispatch({type:ce,pendingFriendsInvitations:t})})),et.on("friends-list",(e=>{const{friends:t}=e;He.dispatch((e=>({type:ie,friends:e}))(t))})),et.on("online-users",(e=>{const{onlineUsers:t}=e;He.dispatch((e=>({type:le,onlineUsers:e}))(t))})),et.on("direct-chat-history",(e=>{console.log(e),(e=>{var t;const{participants:n,messages:r}=e,s=null===(t=He.getState().chat.chosenChatDetails)||void 0===t?void 0:t.id,a=He.getState().auth.userDetails._id;s&&a&&Ve({participants:n,usersInCoversation:[s,a],messages:r})})(e)})),et.on("room-create",(e=>{st(e)})),et.on("active-rooms",(e=>{at(e)})),et.on("conn-prepare",(e=>{const{connUserSocketId:t}=e;Ke(t,!1),et.emit("conn-init",{connUserSocketId:t})})),et.on("conn-init",(e=>{const{connUserSocketId:t}=e;Ke(t,!0)})),et.on("conn-signal",(e=>{(e=>{const{connUserSocketId:t,signal:n}=e;qe[t]&&qe[t].signal(n)})(e)})),et.on("room-participant-left",(e=>{console.log("user left room"),(e=>{const{connUserSocketId:t}=e;qe[t]&&(qe[t].destroy(),delete qe[t]);const n=He.getState().room.remoteStreams.filter((e=>e.connUserSocketId!==t));He.dispatch(Fe(n))})(e)}))},nt=e=>{et.emit("conn-signal",e)},rt=()=>{const e=He.getState().room.audioOnly;Ze(e,(()=>{He.dispatch(ke(!0,!0));const e=He.getState().room.audioOnly;He.dispatch(Ne(e)),et.emit("room-create")}))},st=e=>{const{roomDetails:t}=e;He.dispatch(Ue(t))},at=e=>{var t;const{activeRooms:n}=e,r=He.getState().friends.friends,s=[],a=null===(t=He.getState().auth.userDetails)||void 0===t?void 0:t._id;n.forEach((e=>{e.roomCreator.userId===a?s.push({...e,creatorUsername:"Me"}):r.forEach((t=>{t.id===e.roomCreator.userId&&s.push({...e,creatorUsername:t.username})}))})),He.dispatch((e=>({type:Ee,activeRooms:e}))(s))},ot=e=>{const t=He.getState().room.audioOnly;Ze(t,(()=>{He.dispatch(Ue({roomId:e})),He.dispatch(ke(!1,!0));const t=He.getState().room.audioOnly;var n;He.dispatch(Ne(t)),n={roomId:e},et.emit("room-join",n)}))},it=()=>{const e=He.getState().room.roomDetails.roomId,t=He.getState().room.localStream;t&&(t.getTracks().forEach((e=>e.stop())),He.dispatch(_e(null)));const n=He.getState().room.screenSharingStream;var r;n&&(n.getTracks().forEach((e=>e.stop())),He.dispatch(Le(null))),He.dispatch(Fe([])),Object.entries(qe).forEach((e=>{const t=e[0];qe[t]&&(qe[t].destroy(),delete qe[t])})),r={roomId:e},et.emit("room-leave",r),He.dispatch(Ue(null)),He.dispatch(ke(!1,!1))};var ct=e=>{let{isUserInRoom:t}=e;return Object(j.jsx)(u.a,{disabled:t,onClick:()=>{rt()},style:{width:"48px",height:"48px",borderRadius:"16px",margin:0,padding:0,minWidth:0,marginTop:"10px",color:"white",backgroundColor:"#5865F2"},children:Object(j.jsx)(X.a,{})})};const lt=Object(d.a)("div")({height:"42px",width:"42px",backgroundColor:"#5865f2",borderRadius:"42px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"700",color:"white"});var dt=e=>{let{username:t,large:n}=e;return Object(j.jsx)(lt,{style:n?{height:"80px",width:"80px"}:{},children:t.substring(0,2)})};var jt=e=>{let{creatorUsername:t,roomId:n,amountOfParticipants:r,isUserInRoom:s}=e;const a=r>3,o=`Cretor: ${t}. Connected: ${r}`;return Object(j.jsx)(g.a,{title:o,children:Object(j.jsx)("div",{children:Object(j.jsx)(u.a,{style:{width:"48px",height:"48px",borderRadius:"16px",margin:0,padding:0,minWidth:0,marginTop:"10px",color:"white",backgroundColor:"#5865F2"},disabled:a||s,onClick:()=>{r<4&&ot(n)},children:Object(j.jsx)(dt,{username:t})})})})};const ht=Object(d.a)("div")({width:"72px",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#202225"});var bt=Object(D.b)((e=>{let{room:t}=e;return{...t}}))((e=>{let{activeRooms:t,isUserInRoom:n}=e;return Object(j.jsxs)(ht,{children:[Object(j.jsx)(K,{}),Object(j.jsx)(ct,{isUserInRoom:n}),t.map((e=>Object(j.jsx)(jt,{roomId:e.roomId,creatorUsername:e.creatorUsername,amountOfParticipants:e.participants.length,isUserInRoom:n},e.roomId)))]})})),ut=n(308),xt=n(296),pt=n(312),Ot=n(310),mt=n(311);var gt=Object(D.b)(null,(e=>({...de(e)})))((e=>{let{isDialogOpen:t,closeDialogHandler:n,sendFriendInvitation:s=()=>{}}=e;const[a,o]=Object(r.useState)(""),[i,c]=Object(r.useState)(""),l=()=>{n(),o("")};return Object(r.useEffect)((()=>{c(T(a))}),[a,c]),Object(j.jsx)("div",{children:Object(j.jsxs)(ut.a,{open:t,onClose:l,children:[Object(j.jsx)(xt.a,{children:Object(j.jsx)(p.a,{children:"Invite a Friend"})}),Object(j.jsxs)(Ot.a,{children:[Object(j.jsx)(mt.a,{children:Object(j.jsx)(p.a,{children:"Enter e-mail address of friend which you would like to invite"})}),Object(j.jsx)(E,{label:"Mail",type:"text",value:a,setValue:o,placeholder:"Enter mail address"})]}),Object(j.jsx)(pt.a,{children:Object(j.jsx)(x,{onClick:()=>{s({targetMailAddress:a},l)},disabled:!i,label:"Send",additionalStyles:{marginLeft:"15px",marginRight:"15px",marginBottom:"10px"}})})]})})}));const vt={marginTop:"10px",marginLeft:"5px",width:"80%",height:"30px",background:"#3ba55d"};var St=()=>{const[e,t]=Object(r.useState)(!1);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(x,{additionalStyles:vt,label:"Add Friend",onClick:()=>{t(!0)}}),Object(j.jsx)(gt,{isDialogOpen:e,closeDialogHandler:()=>{t(!1)}})]})};var yt=e=>{let{title:t}=e;return Object(j.jsx)(p.a,{sx:{textTransform:"uppercase",color:"#8e9297",fontSize:"14px",marginTop:"10px"},children:t})},ft=n(142),wt=n.n(ft);var Et=()=>Object(j.jsx)(l.a,{sx:{color:"#3ba55d",display:"flex",alignItems:"center",position:"absolute",right:"5px"},children:Object(j.jsx)(wt.a,{})});var It=Object(D.b)(null,(e=>({...ge(e)})))((e=>{let{id:t,username:n,isOnline:r,setChosenChatDetails:s}=e;return Object(j.jsxs)(u.a,{onClick:()=>{s({id:t,name:n},pe)},style:{width:"100%",height:"42px",marginTop:"10px",display:"flex",alignItems:"center",justifyContent:"flex-start",textTransform:"none",color:"black",position:"relative"},children:[Object(j.jsx)(dt,{username:n}),Object(j.jsx)(p.a,{style:{marginLeft:"7px",fontWeight:700,color:"#8e9297"},variant:"subtitle1",align:"left",children:n}),r&&Object(j.jsx)(Et,{})]})}));const Ct=Object(d.a)("div")({flexGrow:1,width:"100%"}),Tt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((e=>{const n=t.find((t=>t.userId===e.id));e.isOnline=!!n})),e};var Rt=Object(D.b)((e=>{let{friends:t}=e;return{...t}}))((e=>{let{friends:t,onlineUsers:n}=e;return Object(j.jsx)(Ct,{children:Tt(t,n).map((e=>Object(j.jsx)(It,{username:e.username,id:e.id,isOnline:e.isOnline},e.id)))})})),Dt=n(143),kt=n.n(Dt),At=n(144),Ut=n.n(At),_t=n(313);var Mt=e=>{let{disabled:t,acceptInvitationHandler:n,rejectInvitationHandler:r}=e;return Object(j.jsxs)(l.a,{sx:{display:"flex"},children:[Object(j.jsx)(_t.a,{style:{color:"white"},disabled:t,onClick:n,children:Object(j.jsx)(kt.a,{})}),Object(j.jsx)(_t.a,{style:{color:"white"},disabled:t,onClick:r,children:Object(j.jsx)(Ut.a,{})})]})};var Ft=Object(D.b)(null,(e=>({...de(e)})))((e=>{let{id:t,username:n,mail:s,acceptFriendInvitation:a=()=>{},rejectFriendInvitation:o=()=>{}}=e;const[i,c]=Object(r.useState)(!1);return Object(j.jsx)(g.a,{title:s,children:Object(j.jsx)("div",{style:{width:"100%"},children:Object(j.jsxs)(l.a,{sx:{width:"100%",height:"42px",marginTop:"10px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(j.jsx)(dt,{username:n}),Object(j.jsx)(p.a,{sx:{marginLeft:"7px",fontWeight:700,color:"#8e9297",flexGrow:1},variant:"subtitle1",children:n}),Object(j.jsx)(Mt,{disabled:i,acceptInvitationHandler:()=>{console.log(t),a({id:t}),c(!0)},rejectInvitationHandler:()=>{console.log(t),o({id:t}),c(!0)}})]})})})}));const Lt=Object(d.a)("div")({width:"100%",height:"22%",display:"flex",flexDirection:"column",alignItems:"center",overflow:"auto"});var Nt=Object(D.b)((e=>{let{friends:t}=e;return{...t}}))((e=>{let{pendingFriendsInvitations:t}=e;return Object(j.jsx)(Lt,{children:t.map((e=>Object(j.jsx)(Ft,{id:e._id,username:e.senderId.username,mail:e.senderId.mail},e._id)))})}));const Wt=Object(d.a)("div")({width:"224px",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#2F3136"});var zt=()=>Object(j.jsxs)(Wt,{children:[Object(j.jsx)(St,{}),Object(j.jsx)(yt,{title:"Private Messages"}),Object(j.jsx)(Rt,{}),Object(j.jsx)(yt,{title:"Invitations"}),Object(j.jsx)(Nt,{})]});const Pt=Object(d.a)("div")({flexGrow:1,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"});var Ht=()=>Object(j.jsx)(Pt,{children:Object(j.jsx)(p.a,{variant:"h6",sx:{color:"white"},children:"To start chatting - choose conversation"})});const Gt=Object(d.a)("div")({width:"98%",display:"column",marginTop:"10px"});var Vt=e=>{let{name:t=""}=e;return Object(j.jsxs)(Gt,{children:[Object(j.jsx)(dt,{large:!0,username:t}),Object(j.jsx)(p.a,{variant:"h4",sx:{fontWeight:"bold",color:"white",marginLeft:"5px",marginRight:"5px"},children:t}),Object(j.jsxs)(p.a,{sx:{color:"#b9bbbe",marginLeft:"5px",marginRight:"5px"},children:["This is the beginning of your conversation with ",t]})]})};const Jt=Object(d.a)("div")({width:"97%",display:"flex",marginTop:"10px"}),Bt=Object(d.a)("div")({width:"70px"}),$t=Object(d.a)("div")({display:"flex",flexDirection:"column"}),Yt=Object(d.a)("div")({color:"#DCDDDE"}),Zt=Object(d.a)("div")({color:"#DCDDDE",width:"97%"}),qt=Object(d.a)("span")({marginLeft:"70px"});var Kt=e=>{let{content:t,sameAuthor:n,username:r,date:s,sameDay:a}=e;return n&&a?Object(j.jsx)(Zt,{children:Object(j.jsx)(qt,{children:t})}):Object(j.jsxs)(Jt,{children:[Object(j.jsx)(Bt,{children:Object(j.jsx)(dt,{username:r})}),Object(j.jsxs)($t,{children:[Object(j.jsxs)(p.a,{style:{fontSize:"16px",color:"white"},children:[r," ",Object(j.jsx)("span",{style:{fontSize:"12px",color:"#72767d"},children:s})]}),Object(j.jsx)(Yt,{children:t})]})]})};const Qt=Object(d.a)("div")({width:"95%",backgroundColor:"#b9bbbe",height:"1px",position:"relative",marginTop:"20px",marginBottom:"10px"}),Xt=Object(d.a)("span")({backgroundColor:"#36393f",position:"absolute",left:"45%",top:"-10px",color:"#b9bbbe",padding:"0 5px",fontSize:"14px"});var en=e=>{let{date:t}=e;return Object(j.jsx)(Qt,{children:Object(j.jsx)(Xt,{children:t})})};const tn=Object(d.a)("div")({height:"calc(100% - 60px)",overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center"}),nn=(e,t)=>{const n={mm:e.getMonth()+1,dd:e.getDate(),yy:e.getFullYear().toString().slice(-2),yyyy:e.getFullYear()};return t.replace(/mm|dd|yy|yyy/gi,(e=>n[e]))};var rn=Object(D.b)((e=>{let{chat:t}=e;return{...t}}))((e=>{let{chosenChatDetails:t,messages:n}=e;return Object(j.jsxs)(tn,{children:[Object(j.jsx)(Vt,{name:null===t||void 0===t?void 0:t.name}),n.map(((e,t)=>{const r=t>0&&n[t].author._id===n[t-1].author._id,s=t>0&&nn(new Date(e.date),"dd/mm/yy")===nn(new Date(n[t-1].date),"dd/mm/yy");return Object(j.jsxs)("div",{style:{width:"97%"},children:[(!s||0===t)&&Object(j.jsx)(en,{date:nn(new Date(e.date),"dd/mm/yy")}),Object(j.jsx)(Kt,{content:e.content,username:e.author.username,sameAuthor:r,date:nn(new Date(e.date),"dd/mm/yy"),sameDay:s})]},e._id)}))]})}));const sn=Object(d.a)("div")({height:"60px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),an=Object(d.a)("input")({backgroundColor:"#2f3136",width:"98%",height:"44px",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",padding:"0 10px"});var on=Object(D.b)((e=>{let{chat:t}=e;return{...t}}))((e=>{let{chosenChatDetails:t}=e;const[n,s]=Object(r.useState)(""),a=()=>{var e;n.length>0&&(e={receiverUserId:t.id,content:n},console.log(e),et.emit("direct-message",e),s(""))};return Object(j.jsx)(sn,{children:Object(j.jsx)(an,{placeholder:`Write message to ${t.name}`,value:n,onChange:e=>{s(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&a()}})})}));const cn=Object(d.a)("div")({flexGrow:1});var ln=e=>{let{chosenChatDetails:t}=e;return Object(r.useEffect)((()=>{var e;e={receiverUserId:t.id},et.emit("direct-chat-history",e)}),[t]),Object(j.jsxs)(cn,{children:[Object(j.jsx)(rn,{}),Object(j.jsx)(on,{})]})};const dn=Object(d.a)("div")({flexGrow:1,backgroundColor:"#36393f",marginTop:"48px",display:"flex"});var jn=Object(D.b)((e=>{let{chat:t}=e;return{...t}}))((e=>{let{chosenChatDetails:t}=e;return Object(j.jsx)(dn,{children:t?Object(j.jsx)(ln,{chosenChatDetails:t}):Object(j.jsx)(Ht,{})})})),hn=n(300),bn=n(303),un=n(145),xn=n.n(un);var pn=Object(D.b)((e=>{let{room:t}=e;return{...t}}),(e=>({...Ae(e)})))((e=>{let{audioOnly:t,setAudioOnly:n}=e;const[s,a]=r.useState(null),o=Boolean(s);return Object(j.jsxs)("div",{children:[Object(j.jsx)(_t.a,{onClick:e=>{a(e.currentTarget)},style:{color:"white"},children:Object(j.jsx)(xn.a,{})}),Object(j.jsxs)(hn.a,{id:"basic-menu",anchorEl:s,open:o,onClose:()=>{a(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(j.jsx)(bn.a,{onClick:A,children:"Logout"}),Object(j.jsx)(bn.a,{onClick:()=>{n(!t)},children:t?"Audio Only Enabled":"Audio Only Disabled"})]})]})}));var On=Object(D.b)((e=>{var t;return{name:null===(t=e.chat.chosenChatDetails)||void 0===t?void 0:t.name}}))((e=>{let{name:t}=e;return Object(j.jsx)(p.a,{sx:{fontSize:"16px",color:"white",fontWeight:"bold"},children:""+(t?`Chosen conversation: ${t}`:"")})}));const mn=Object(d.a)("div")({position:"absolute",right:"0",top:"0",height:"48px",borderBottom:"1px solid black",backgroundColor:"#36393f",width:"calc(100% - 326px)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 15px"});var gn=()=>Object(j.jsxs)(mn,{children:[Object(j.jsx)(On,{}),Object(j.jsx)(pn,{})]}),vn=n(147),Sn=n.n(vn),yn=n(146),fn=n.n(yn);const wn=Object(d.a)("div")({position:"absolute",bottom:"10px",right:"10px"});var En=e=>{let{isRoomMinimized:t,handleRoomResize:n}=e;return Object(j.jsx)(wn,{children:Object(j.jsx)(_t.a,{style:{color:"white"},onClick:n,children:t?Object(j.jsx)(fn.a,{}):Object(j.jsx)(Sn.a,{})})})};const In=Object(d.a)("div")({height:"50%",width:"50%",backgroundColor:"black",borderRadius:"8px"}),Cn=Object(d.a)("video")({width:"100%",height:"100%"});var Tn=e=>{let{stream:t,isLocalStream:n}=e;const s=Object(r.useRef)();return Object(r.useEffect)((()=>{const e=s.current;e.srcObject=t,e.onloadedmetadata=()=>{e.play()}}),[t]),Object(j.jsx)(In,{children:Object(j.jsx)(Cn,{ref:s,autoPlay:!0,muted:!!n})})};const Rn=Object(d.a)("div")({height:"85%",width:"100%",display:"flex",flexWrap:"wrap"});var Dn=Object(D.b)((e=>{let{room:t}=e;return{...t}}))((e=>{let{localStream:t,remoteStreams:n,screenSharingStream:r}=e;return Object(j.jsxs)(Rn,{children:[Object(j.jsx)(Tn,{stream:r||t,isLocalStream:!0}),n.map((e=>Object(j.jsx)(Tn,{stream:e},e.id)))]})})),kn=n(148),An=n.n(kn),Un=n(149),_n=n.n(Un);var Mn=e=>{let{localStream:t}=e;const[n,s]=Object(r.useState)(!0);return Object(j.jsx)(_t.a,{onClick:()=>{t.getVideoTracks()[0].enabled=!n,s(!n)},style:{color:"white"},children:n?Object(j.jsx)(An.a,{}):Object(j.jsx)(_n.a,{})})},Fn=n(150),Ln=n.n(Fn),Nn=n(151),Wn=n.n(Nn);var zn=e=>{let{localStream:t}=e;const[n,s]=Object(r.useState)(!0);return Object(j.jsx)(_t.a,{onClick:()=>{t.getAudioTracks()[0].enabled=!n,s(!n)},style:{color:"white"},children:n?Object(j.jsx)(Ln.a,{}):Object(j.jsx)(Wn.a,{})})},Pn=n(152),Hn=n.n(Pn);var Gn=()=>Object(j.jsx)(_t.a,{onClick:()=>{it()},style:{color:"white"},children:Object(j.jsx)(Hn.a,{})}),Vn=n(154),Jn=n.n(Vn),Bn=n(153),$n=n.n(Bn);const Yn={audio:!1,video:!0};var Zn=e=>{let{localStream:t,screenSharingStream:n,setScreenSharingStream:r,isScreenSharingActive:s}=e;return Object(j.jsx)(_t.a,{onClick:async()=>{if(s)Xe(t),n.getTracks().forEach((e=>e.stop())),r(null);else{let t=null;try{t=await navigator.mediaDevices.getDisplayMedia(Yn)}catch(e){console.log("error occured when trying to get an access to screen share stream")}t&&(r(t),Xe(t))}},style:{color:"white"},children:s?Object(j.jsx)($n.a,{}):Object(j.jsx)(Jn.a,{})})};const qn=Object(d.a)("div")({height:"15%",width:"100%",backgroundColor:"#5865f2",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"});var Kn=Object(D.b)((e=>{let{room:t}=e;return{...t}}),(e=>({...Ae(e)})))((e=>{const{localStream:t,isUserJoinedWithOnlyAudio:n}=e;return Object(j.jsxs)(qn,{children:[!n&&Object(j.jsx)(Zn,{...e}),Object(j.jsx)(zn,{localStream:t}),Object(j.jsx)(Gn,{}),!n&&Object(j.jsx)(Mn,{localStream:t})]})}));const Qn=Object(d.a)("div")({position:"absolute",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#202225"}),Xn={width:"100%",height:"100vh"},er={bottom:"0px",right:"0px",width:"30%",height:"40vh"};var tr=()=>{const[e,t]=Object(r.useState)(!0);return Object(j.jsxs)(Qn,{style:e?er:Xn,children:[Object(j.jsx)(Dn,{}),Object(j.jsx)(Kn,{}),Object(j.jsx)(En,{isRoomMinimized:e,handleRoomResize:()=>{t(!e)}})]})};const nr=Object(d.a)("div")({width:"100%",height:"100vh",display:"flex"});var rr=Object(D.b)((e=>{let{room:t}=e;return{...t}}),(e=>({...P(e)})))((e=>{let{setUserDetails:t,isUserInRoom:n}=e;return Object(r.useEffect)((()=>{const e=localStorage.getItem("user");e?(t(JSON.parse(e)),tt(JSON.parse(e))):A()}),[]),Object(j.jsxs)(nr,{children:[Object(j.jsx)(bt,{}),Object(j.jsx)(zt,{}),Object(j.jsx)(jn,{}),Object(j.jsx)(gn,{}),n&&Object(j.jsx)(tr,{})]})})),sr=n(298),ar=n(301);var or=Object(D.b)((e=>{let{alert:t}=e;return{...t}}),(e=>({...F(e)})))((e=>{let{showAlertMessage:t,closeAlertMessage:n,alertMessageContent:r}=e;return Object(j.jsx)(ar.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,onClose:n,autoHideDuration:6e3,children:Object(j.jsx)(sr.a,{severity:"info",children:r})})}));n(231);var ir=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(i.a,{children:Object(j.jsxs)(c.d,{children:[Object(j.jsx)(c.b,{exact:!0,path:"/login",children:Object(j.jsx)(J,{})}),Object(j.jsx)(c.b,{exact:!0,path:"/register",children:Object(j.jsx)(Y,{})}),Object(j.jsx)(c.b,{exact:!0,path:"/dashboard",children:Object(j.jsx)(rr,{})}),Object(j.jsx)(c.b,{path:"/",children:Object(j.jsx)(c.a,{to:"/dashboard"})})]})}),Object(j.jsx)(or,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(D.a,{store:He,children:Object(j.jsx)(ir,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[232,1,2]]]);
//# sourceMappingURL=main.44a1839f.chunk.js.map